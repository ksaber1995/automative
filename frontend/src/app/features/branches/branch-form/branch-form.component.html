<div class="container mx-auto p-6">
  <p-card [header]="isEditMode() ? 'Edit Branch' : 'Create New Branch'">
    <form [formGroup]="branchForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
        <!-- Branch Name -->
        <div class="field">
          <label for="name" class="block text-sm font-medium mb-2">
            Branch Name <span class="text-red-500">*</span>
          </label>
          <input
            id="name"
            type="text"
                        formControlName="name"
            class="w-full"
            placeholder="Enter branch name"
            [class.ng-invalid]="name?.invalid && name?.touched"
          />
          @if (name?.invalid && name?.touched) {
            <small class="text-red-500">
              @if (name?.errors?.['required']) {
                Branch name is required
              }
              @if (name?.errors?.['minlength']) {
                Branch name must be at least 3 characters
              }
            </small>
          }
        </div>

        <!-- Branch Code -->
        <div class="field">
          <label for="code" class="block text-sm font-medium mb-2">
            Branch Code <span class="text-red-500">*</span>
          </label>
          <input
            id="code"
            type="text"
                        formControlName="code"
            class="w-full"
            placeholder="Enter branch code (e.g., DTN-001)"
            [class.ng-invalid]="code?.invalid && code?.touched"
          />
          @if (code?.invalid && code?.touched) {
            <small class="text-red-500">
              @if (code?.errors?.['required']) {
                Branch code is required
              }
              @if (code?.errors?.['minlength']) {
                Branch code must be at least 2 characters
              }
            </small>
          }
        </div>

        <!-- Address -->
        <div class="field md:col-span-2">
          <label for="address" class="block text-sm font-medium mb-2">
            Address <span class="text-red-500">*</span>
          </label>
          <input
            id="address"
            type="text"
                        formControlName="address"
            class="w-full"
            placeholder="Enter street address"
            [class.ng-invalid]="address?.invalid && address?.touched"
          />
          @if (address?.invalid && address?.touched) {
            <small class="text-red-500">Address is required</small>
          }
        </div>

        <!-- City -->
        <div class="field">
          <label for="city" class="block text-sm font-medium mb-2">
            City <span class="text-red-500">*</span>
          </label>
          <input
            id="city"
            type="text"
                        formControlName="city"
            class="w-full"
            placeholder="Enter city"
            [class.ng-invalid]="city?.invalid && city?.touched"
          />
          @if (city?.invalid && city?.touched) {
            <small class="text-red-500">City is required</small>
          }
        </div>

        <!-- State -->
        <div class="field">
          <label for="state" class="block text-sm font-medium mb-2">State</label>
          <input
            id="state"
            type="text"
                        formControlName="state"
            class="w-full"
            placeholder="Enter state"
          />
        </div>

        <!-- Zip Code -->
        <div class="field">
          <label for="zipCode" class="block text-sm font-medium mb-2">Zip Code</label>
          <input
            id="zipCode"
            type="text"
                        formControlName="zipCode"
            class="w-full"
            placeholder="Enter zip code"
          />
        </div>

        <!-- Phone -->
        <div class="field">
          <label for="phone" class="block text-sm font-medium mb-2">
            Phone <span class="text-red-500">*</span>
          </label>
          <input
            id="phone"
            type="tel"
                        formControlName="phone"
            class="w-full"
            placeholder="Enter phone number"
            [class.ng-invalid]="phone?.invalid && phone?.touched"
          />
          @if (phone?.invalid && phone?.touched) {
            <small class="text-red-500">Phone is required</small>
          }
        </div>

        <!-- Email -->
        <div class="field">
          <label for="email" class="block text-sm font-medium mb-2">
            Email <span class="text-red-500">*</span>
          </label>
          <input
            id="email"
            type="email"
                        formControlName="email"
            class="w-full"
            placeholder="Enter email address"
            [class.ng-invalid]="email?.invalid && email?.touched"
          />
          @if (email?.invalid && email?.touched) {
            <small class="text-red-500">
              @if (email?.errors?.['required']) {
                Email is required
              }
              @if (email?.errors?.['email']) {
                Please enter a valid email
              }
            </small>
          }
        </div>

        <!-- Manager ID (Optional) -->
        <div class="field">
          <label for="managerId" class="block text-sm font-medium mb-2">Manager ID</label>
          <input
            id="managerId"
            type="text"
                        formControlName="managerId"
            class="w-full"
            placeholder="Enter manager ID (optional)"
          />
        </div>

        <!-- Opening Date -->
        <div class="field">
          <label for="openingDate" class="block text-sm font-medium mb-2">
            Opening Date <span class="text-red-500">*</span>
          </label>
          <input
            id="openingDate"
            type="date"
                        formControlName="openingDate"
            class="w-full"
            [class.ng-invalid]="openingDate?.invalid && openingDate?.touched"
          />
          @if (openingDate?.invalid && openingDate?.touched) {
            <small class="text-red-500">Opening date is required</small>
          }
        </div>
      </div>

      <!-- Form Actions -->
      <div class="flex justify-end gap-3 mt-6">
        <button
          pButton
          type="button"
          label="Cancel"
          class="p-button-outlined"
          (click)="cancel()"
          [disabled]="loading()"
        ></button>
        <button
          pButton
          type="submit"
          [label]="isEditMode() ? 'Update Branch' : 'Create Branch'"
          [loading]="loading()"
          [disabled]="branchForm.invalid || loading()"
        ></button>
      </div>
    </form>
  </p-card>
</div>
